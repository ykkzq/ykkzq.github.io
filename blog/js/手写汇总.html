<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>yangkun&#39;s blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="前端开发 yangkun的个人博客">
    <link rel="preload" href="/assets/css/0.styles.aa6d0e5c.css" as="style"><link rel="preload" href="/assets/js/app.9381e624.js" as="script"><link rel="preload" href="/assets/js/2.dc72d726.js" as="script"><link rel="preload" href="/assets/js/9.72d8ff50.js" as="script"><link rel="prefetch" href="/assets/js/10.2eb04690.js"><link rel="prefetch" href="/assets/js/3.554aa183.js"><link rel="prefetch" href="/assets/js/4.4d64059e.js"><link rel="prefetch" href="/assets/js/5.cb5d5a29.js"><link rel="prefetch" href="/assets/js/6.62d18681.js"><link rel="prefetch" href="/assets/js/7.d34c9432.js"><link rel="prefetch" href="/assets/js/8.73fa1447.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa6d0e5c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">yangkun's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js/手写汇总.html" class="active sidebar-link">手写汇总</a></li><li><a href="/blog/js/EventLoop.html" class="sidebar-link">EventLoop</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>1.数组扁平化 :</strong>
数组扁平化是指将一个多维数组变为一个一维数组</p> <div class="language- extra-class"><pre class="language-text"><code>const res = [];
const fn = (arr) =&gt; {
    for(let i=0;i&lt;arr.length;i++){
        if (Array.isArray(arr[i])){
            fn(arr[i])
        } else {
            res.push(arr[i])
        }
    }
};

例子：
fn([1, [2, [3, [4, 5]]], 6])
</code></pre></div><p><strong>2.数组去重</strong></p> <div class="language- extra-class"><pre class="language-text"><code>const unique = arr =&gt; {
    let res=[];
    for(let i=0;i&lt;arr.length;i++){
        if (res.indexOf(arr[i]) === -1){
            res.push(arr[i])
        }
    }
    return res
}

例子：
unique([1,1,3,4,5,6,5])
</code></pre></div><p><strong>3.类数组转化为数组 :</strong>
类数组是具有 length 属性，但不具有数组原型上的方法。常见的类数组有 arguments、DOM 操作方法返回的结果。</p> <div class="language- extra-class"><pre class="language-text"><code>1.[...document.querySelectorAll('div')];
2.Array.prototype.splice.call(document.querySelectorAll('div'));
</code></pre></div><p><strong>4.filter</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Array.prototype._filter = function(fn){
    if(!Array.isArray(this)){
        throw Error('type error')
    }
    if(typeof fn !== 'function'){
        throw Error(fn + 'is not a function')
    }
    let res=[];
    for(let i=0;i&lt;this.length;i++){
        if (fn(this[i], i, this)){
            res.push(this[i])
        }
    }
    return res;
}

例子：
function fun(e,i,a){
    return e&gt;2
}
var arr = [1,2,3,4];
var res = arr._filter(fun);
console.log(res)
</code></pre></div><p><strong>5.map</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Array.prototype._map = function(fn){
    if (!Array.isArray(this)){
        throw Error('type error')
    }
    if(typeof fn !== 'function'){
        throw Error(fn + 'is not a function')
    }
    let res=[]
    for(let i=0;i&lt;this.length;i++){
        res.push(fn(this[i], i, this))
    }
    return res;
}

function ArrReduce(e){
    return e * 2;
}
var arr = [1,2,3];
var res = arr._map(ArrReduce)
console.log(res)
</code></pre></div><p><strong>6.forEach</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Array.prototype._forEach = function(fn){
    if(!Array.isArray(this)){
        throw Error('type error')
    }
    if(typeof fn !== 'function'){
        throw Error(fn + 'is not a function')
    }
    let res=[]
    for(let i=0;i&lt;this.length;i++){
        res.push(fn(this[i], i))
    }
}

例子：
let list = [1,2,3,4,5]
list._forEach((elem,i)=&gt;{
    console.log(elem, i)
})
</code></pre></div><p><strong>7.reduce</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Array.prototype._reduce = function (fn, initValue) {
  if (!Array.isArray(this)) {
    throw Error(&quot;type error&quot;);
  }
  if (typeof fn !== &quot;function&quot;) {
    throw Error(fn + &quot;is not a function&quot;);
  }
  if (initValue &amp;&amp; typeof initValue !== &quot;number&quot;) {
    throw Error(initValue + &quot;is not a number&quot;);
  }
  let acc;
  if (initValue) {
    acc = initValue;
  } else {
    acc = 0;
  }
  for (let i = 0; i &lt; this.length; i++) {
    acc = fn(acc, this[i]);
  }
  return acc;
};

例子：
var arr = [1, 2, 3];
var res = arr._reduce(function (acc, el) {
  return acc + el;
}, 2);
console.log(res);
</code></pre></div><p><strong>8.apply</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Function.prototype._apply = function(ctx=window, args){
    if(typeof this !== 'function'){
        throw Error(this + 'is not a function')
    }
    ctx['fn'] = this;
    let res = ctx['fn'](...args);
    delete ctx['fn'];
    return res;
}

function fn(...args) {
    console.log(this)
    console.log(args)
}
fn._apply({x:10}, [1,2,3])
</code></pre></div><p><strong>9.call</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Function.prototype._call = function(ctx=window, ...args){
    if(typeof this !== 'function'){
        throw Error(this + 'is not a function')
    }
    ctx['fn'] = this;
    let res = ctx['fn'](...args);
    delete ctx['fn'];
    return res;
}

例子：
function fn(...args) {
    console.log(this)
    console.log(...args)
}
fn._call({x:10}, 1,2,3)
</code></pre></div><p><strong>10.bind</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Function.prototype._bind = function(ctx=window, ...args) {
  if (typeof this !== 'function') {
    throw new Error(this + 'is not a function')
  }
  var that = this;
  return function F() {
    // 考虑new的情况
    if(this instanceof F) {
      return new that(...args, ...arguments)
    } else{
      ctx['fn'] = this;
      let res = ctx['fn'](...args.concat(...arguments));
      delete ctx['fn'];
      return res
    }
  }
}

例子：
function fn(...args) {
    console.log(this)
    console.log(...args)
}
let b = fn._bind({x:10}, 1,2,3)
b(4)
</code></pre></div><p><strong>11.函数防抖:</strong> 触发高频时间后 n 秒内函数只会执行一次,如果 n 秒内高频时间再次触发,则重新计算时间。</p> <div class="language- extra-class"><pre class="language-text"><code>function debounce (fn, delay){
    let timer = null;
    let that = this;
    return function(){
        if(timer){
            clearTimeout(timer)
        }
        timer = setTimeout(function(){
            fn.apply(that,arguments)
            timer = null
        },delay)
    }
}
</code></pre></div><p><strong>12.函数节流:</strong> 高频时间触发,但 n 秒内只会执行一次,所以节流会稀释函数的执行频率。</p> <div class="language- extra-class"><pre class="language-text"><code>function throttle(fn,delay){
    let timer = null;
    let that = this;
    return function(){
        if(timer){
            timer = null
        }
        timer = setTimeout(function(){
            fn.apply(that, arguments)
            timer = null
        },delay)
    }
}
</code></pre></div><p><strong>13.函数柯里化:</strong> 指的是将一个接受多个参数的函数 变为 接受一个参数返回一个函数的固定形式，这样便于再次调用，例如 f(1)(2)=3;</p> <div class="language- extra-class"><pre class="language-text"><code>function f(){
    const _args = [...arguments];
    function fn(){
        _args.push(...arguments);
        return fn;
    }
    fn.toString = function(){
        return _args.reduce((sum, cur) =&gt; sum + cur);
    }
    return fn
}
</code></pre></div><p><strong>14.模拟 new 操作</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function myNew(fn,...args) {
    const obj = Object.create(null)
    obj.__proto__ = fn.prototype
    const result = fn.apply(obj, args)
    const isObject = typeof result === 'object' &amp;&amp; result !== null
    const isFunction = typeof result === 'function'
    if(isObject || isFunction) return result
    return obj
}

例：
function P() {
    const args = Array.prototype.slice.call(arguments, 0)
    console.log(args)
}
var p = myNew(P, 1,2,3)
var p2 = new p(1,2,3)
</code></pre></div><p><strong>15.手写 ajax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function _ajax(url){
    let p = new Promose((resolve, reject)=&gt;{
        const xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.onreadystatechange = function(){
            if(xhr.readyState === 4){
                if(xhr.status === 200){
                    resolve(
                        JSON.parse(xhr.responseText);
                    )
                } else if(xhr.status === 404){
                    reject(new Error('404 not found'))
                }
            }
        }
        xhr.send(null);
    });
    return p;
}
</code></pre></div><p><strong>16.深拷贝</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function deepClone(obj={}){
    if(typeof obj !== 'object' || obj === null){
        return obj;
    }
    let result;
    if(obj instanceof Array){
        result = [];
    } else {
        result = {};
    }
    for(let key in obj){
        if(obj.hasOwnProperty(key)){
            result[key]=deepClone(obj[key]);
        }
    }
    return result;
}
</code></pre></div><p><strong>17.instanceof</strong></p> <p>instanceof
原理：判断某个对象是否属于某个类型，或者是该类型的父类型祖先类型。</p> <div class="language- extra-class"><pre class="language-text"><code>function myInstanceof(left, right) {
    let leftValue = left.__proto__
    let rightValue = right.prototype
    while(leftValue) {
      if(leftValue===rightValue) {
        return true
      }
      leftValue = leftValue.__proto__
    }
    return false
  }

例：
function P() {}
const p = new P()
console.log(p instanceof P)
console.log(myInstanceof(p, P))
</code></pre></div><p><strong>18.Promsie.all</strong></p> <p>核心思路：</p> <ol><li>接收一个 Promise 实例的数组或者具有 Iterator 接口的对象作为参数</li> <li>这个方法返回一个新的 Promsie 对象</li> <li>遍历传入的参数，用 Promsie.resolve()将参数进行包裹使其变成一个 Promsie 对象</li> <li>参数所有回调成功才是成功，返回值数组与参数顺序一致，参数数组只要有一个失败则触发失败状态</li></ol> <div class="language- extra-class"><pre class="language-text"><code> function promiseAll(promsies) {
    return new Promise((resolve, reject)=&gt; {
      if(!Array.isArray(promsies)) {
        throw new Error('not Array')
      }
      let len = promsies.length
      let count = 0
      let result = []
      for(let i=0;i&lt;len;i++) {
        Promise.resolve(promsies[i]).then(data=&gt; {
          result.push(data)
          count++
          if(count===len) {
            return resolve(result)
          }
        }).catch(err=&gt; {
          return reject(err)
        })
      }
    })
 }

 例：
 const p1 = Promise.resolve(1)
  const p2 = Promise.resolve(2)
  Promise.all([p1, p2]).then(data=&gt; {
      console.log(data)
  })
  promiseAll([p1, p2]).then(data=&gt; {
      console.log(data)
  })
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/js/EventLoop.html">
        EventLoop
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9381e624.js" defer></script><script src="/assets/js/2.dc72d726.js" defer></script><script src="/assets/js/9.72d8ff50.js" defer></script>
  </body>
</html>
